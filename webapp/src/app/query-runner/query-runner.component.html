<mat-grid-list cols="2">
	<mat-grid-tile>
		<form [formGroup]="queryBuilder" (ngSubmit)="runQuery(throwOnUndefined(buildQuery()))">
			<mat-list>
				<mat-list-item><mat-form-field>
					<mat-label>column</mat-label>
					<mat-select formControlName="columns" (ngModelChange)="ngOnChanges()" multiple>
						<mat-option *ngFor="let col of columns" [value]="col">
							{{col[1]}}
						</mat-option>
					</mat-select>
				</mat-form-field></mat-list-item>

				<mat-list-item><mat-form-field>
					<mat-label>operation</mat-label>
					<mat-select formControlName="operation">
						<mat-option *ngFor="let op of operations" [value]="op">
							{{op}}
						</mat-option>
					</mat-select>
				</mat-form-field></mat-list-item>

				<mat-list-item><button mat-raised-button color="primary" type="submit" [disabled]="!queryBuilder.valid">
					launch
				</button></mat-list-item>
			</mat-list>
		</form>
	</mat-grid-tile>

	<mat-grid-tile>
		<ng-container *ngIf="state[0] === 'loading'">
			<mat-progress-bar mode="indeterminate"></mat-progress-bar>
		</ng-container>
		<ng-container *ngIf="state[0] === 'errored'">
			Error: {{state[1].message}}
		</ng-container>
		<ng-container *ngIf="state[0] === 'loaded'">
			<app-results-plotter [columns]="state[1]" [results]="state[2]"></app-results-plotter>
		</ng-container>
	</mat-grid-tile>
</mat-grid-list>
